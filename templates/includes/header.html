{% with request.resolver_match.url_name as url_name %}
<div class="topnav">
    <a class="{% if url_name == 'books.index' %}active{% endif %}" href="{% url 'books.index' %}">Home</a>
    <a class="{% if url_name == 'books.list_books' %}active{% endif %}" href="{% url 'books.list_books' %}">List Books</a>
    <a class="{% if url_name == 'books.aboutus' %}active{% endif %}" href="{% url 'books.aboutus' %}">About</a>

    <!-- Right-aligned user actions -->
    <div style="float:right;">
        {% if user.is_authenticated %}
            <span style="margin-right: 10px;">Welcome, {{ user.username }}</span>
            <form action="{% url 'logout' %}" method="post" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="logout-btn">Logout</button>
            </form>
        {% else %}
            <a class="{% if url_name == 'login' %}active{% endif %}" href="{% url 'login' %}">Login</a>
            <a class="{% if url_name == 'register' %}active{% endif %}" href="{% url 'register' %}">Register</a>
        {% endif %}
    </div>
</div>
{% endwith %}
